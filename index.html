<!-- 完全版スロット＋Click＋カード＋スキルツリー UI -->
<!-- gapa0 専用スロットゲーム HTML（PC 1画面収まり＆前UI復元） -->
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Card Slot Clicker 1to9</title>
<style>
  body {
    background: #fafafa;
    font-family: "Segoe UI", sans-serif;
    display: flex;
    flex-direction: row;
    gap: 20px;
    padding: 20px;
  }

  /* 左カラム */
  .left-area {
    width: 60%;
  }

  /* スロット本体 */
  .slot-wrapper {
    width: 100%;
    background: #ffffff;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.12);
  }

  .slot-grid {
    width: 100%;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-bottom: 10px;
  }

  .slot-cell {
    width: 100%;
    aspect-ratio: 8 / 5;
    background-size: cover;
    background-position: center;
    border-radius: 10px;
  }

  .slot-buttons {
    display: flex;
    gap: 10px;
    margin-top: 10px;
  }
  button {
    padding: 10px 16px;
    border-radius: 10px;
    background: #eef3ff;
    border: none;
    font-size: 14px;
    cursor: pointer;
  }

  /* Click 部分 */
  .click-area {
    width: 100%;
    margin-top: 20px;
    background: #ffffff;
    padding: 15px;
    border-radius: 15px;
    text-align: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.12);
  }
  .click-img {
    width: 60%;
    cursor: pointer;
    user-select: none;
  }

  /* 右カラム */
  .right-area {
    width: 40%;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .panel {
    background: #ffffff;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.12);
  }

</style>
</head>
<body>

<div class="left-area">
  <!-- スロット本体 -->
  <div class="slot-wrapper">
    <div id="slotGrid" class="slot-grid"></div>

    <div class="slot-buttons">
      <button id="spinBtn">スピン(20)</button>
      <button id="stop1">停止1</button>
      <button id="stop2">停止2</button>
      <button id="stop3">停止3</button>
    </div>
  </div>

  <!-- Click 部分 -->
  <div class="click-area">
    <img id="clickImg" class="click-img" src="github/images/click1" />
    <p>クリック収入: <span id="clickLv">1</span> / 回</p>
  </div>
</div>

<!-- 右側 UI -->
<div class="right-area">
  <!-- ステータス -->
  <div class="panel">
    <h3>ステータス</h3>
    <p>コイン: <span id="coin">100</span></p>
    <p>マナ: <span id="mana">0</span></p>
  </div>

  <!-- カード -->
  <div class="panel">
    <h3>カード</h3>
    <ul id="cardList"></ul>
  </div>

  <!-- スキルツリー -->
  <div class="panel">
    <h3>スキルツリー</h3>
    <ul id="skillList"></ul>
  </div>
</div>

<script>
// ==========================
// 画像パス設定
// ==========================
const slotImages = [
  "github/images/slot1",
  "github/images/slot2",
  "github/images/slot3",
  "github/images/slot4",
  "github/images/slot5",
  "github/images/slot6",
  "github/images/slot7",
  "github/images/slot8",
  "github/images/slot9"
];

// ==========================
// ステータス
// ==========================
let coin = 100;
let mana = 0;
let clickLv = 1;

document.getElementById("coin").textContent = coin;
document.getElementById("mana").textContent = mana;
document.getElementById("clickLv").textContent = clickLv;

// ==========================
// Click
// ==========================
const clickImg = document.getElementById("clickImg");
clickImg.onclick = () => {
  coin += clickLv;
  document.getElementById("coin").textContent = coin;
};

// ==========================
// スロット UI 初期化
// ==========================
const slotGrid = document.getElementById("slotGrid");
const reel = [[], [], []];
let spinning = [false, false, false];

function initSlot() {
  slotGrid.innerHTML = "";

  for (let i = 0; i < 3; i++) {
    const top = document.createElement("div");
    const mid = document.createElement("div");
    const bot = document.createElement("div");

    top.className = "slot-cell";
    mid.className = "slot-cell";
    bot.className = "slot-cell";

    reel[i] = [top, mid, bot];

    slotGrid.appendChild(top);
    slotGrid.appendChild(mid);
    slotGrid.appendChild(bot);
  }
}

initSlot();

// ==========================
// スロット動作
// ==========================
function rollReel(index) {
  spinning[index] = true;

  const loop = () => {
    if (!spinning[index]) return;
    for (let c of reel[index]) {
      const img = slotImages[Math.floor(Math.random() * slotImages.length)];
      c.style.backgroundImage = `url(${img})`;
    }
    requestAnimationFrame(loop);
  };
  loop();
}

function stopReel(index) {
  spinning[index] = false;
}

// ==========================
// 全リール停止後の判定
// ==========================
function checkReward() {
  if (spinning.some(v => v)) return;

  const midRow = reel.map(col => col[1].style.backgroundImage);

  if (midRow[0] === midRow[1] && midRow[1] === midRow[2]) {
    coin += 40;
    document.getElementById("coin").textContent = coin;
    alert("あたり！ +40");
  }
}

// ==========================
// ボタン処理
// ==========================
document.getElementById("spinBtn").onclick = () => {
  if (coin < 20) return;
  coin -= 20;
  document.getElementById("coin").textContent = coin;

  rollReel(0);
  rollReel(1);
  rollReel(2);
};

document.getElementById("stop1").onclick = () => { stopReel(0); checkReward(); };
document.getElementById("stop2").onclick = () => { stopReel(1); checkReward(); };
document.getElementById("stop3").onclick = () => { stopReel(2); checkReward(); };

</script>
</body>
</html>
